## 게이트웨이

게이트웨이는 리소스와 애플리케이션을 연결하는 역할을 한다.

### 게이트웨이 vs 프락시

프락시는 HTTP 트랜잭션을 처리한다.(클라이언트와 서버 사이에서) 단, 프락시는 같은 프로토콜을 사용하는 애플리케이션간 HTTP 트랜잭션을 처리하고 게이트웨이는
서로 다른 프로토콜간의 HTTP 트랜잭션 처리와, 데이터베이스에 질의를 보낼 수도 있다.

데이터베이스에 질의를 보내는 경우 서버와 데이터베이스사이에 게이트웨이가 위치한다.

게이트웨이는 `/`를 기준으로 왼쪽은 `클라이언트 측 게이트웨이` 오른쪽은 `서버 측 게이트웨이`라고 한다.

- HTTPS/HTTP 
  - 클라이언트 : HTTPS
  - 서버 : HTTP
  - 이것을 `클라이언트 측 보안 가속 게이트웨이`라고 한다.
  - 이 게이트웨이는 서버의 앞단에 위치하고, 보이지 않는 인터셉터 게이트웨이나 리버스 프락시 역할을 한다.
  - HTTPS 트래픽을 받아서 복호화하고, 웹 서버로 보낼 HTTP 요청을 만든다.
- HTTP/CGI
  - 클라이언트 : HTTP
  - 서버 : CGI
  
## 터널

터널은 HTTP의 CONNECT 메서드를 사용하여 커넥션을 맺는다.

CONNECT 메서드는 터널 게이트웨이가 임의의 목적 서버와 포트에 TCP 커넥션을 맺고 클라이언트와 서버 간에 오는 데이터를 무조건 전달하기를 요청한다.

## 릴레이
  
HTTP 릴레이는 HTTP 명세를 완전히 준수하지는 않는 간단한 HTTP 프락시이다.

릴레이는 커넥션을 맺기 위한 HTTP 통신을 한 다음, 바이트를 맹목적으로 전달한다.

단순 맹목적 릴레이의 문제점은 맹목적 릴레이가 cONNECTION 헤더를 제대로 처리하지 못해서 `keep-alive` 커넥션이 행(hang)에 걸리는 것이다.

> 행(hang) : 요청 처리가 끝나도 커넥션이 닫히지 않고 열려있는 상태

릴레이가 HTTP 요청을 받지만 Connection 헤더를 이해하지 못하므로 단순히 요청을 서버로 넘기면 웹 서버는 릴레이가 keep-alive를 하기 바란다고 잘못된 결론을 내린다.
응답도 keep-alive로 보낸다. 하지만 릴레이는 keep-alive를 모르기 때문에 행(hang)에 걸리게 된다.
